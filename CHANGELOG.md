# 【文件哈希值批量计算器】更新日志

## 版本：v5.1.0，2023/9/26
1. 实现一次任务同时计算多个算法的结果，每个任务成功后显示一个详情按钮，点击打开详情窗口
2. 实现通过哈希校验依据文件进行校验时同时校验多个算法的哈希值
3. 设置面板增加设置项“直接使用校验依据进行校验时首选校验依据中的算法而非默认算法”并实现从校验依据文件解析对应文件的对应算法并进行计算
4. 调整设置面板分类
5. 增加设置项“导出哈希值时导出哪些算法的结果”并实现相关功能
6. 哈希结果列表增加两个右键菜单选项：复制所有算法结果、按格式复制所有算法结果
7. 文件大小列的悬浮提示使用合适的单位显示直观的文件大小
8. 算法面板和文件详情面板增加按 ESC 键关闭功能
9. 修复使用文本文件校验依据直接校验时，没有搜索到的文件名在表格中总是显示为小写字母的问题
10. 增加设置项“每个任务的多个算法并行”并实现功能
11. 增加筛选面板，用于筛选计算结果表格内容 (#21)，其中包含一些筛选器和一些可对筛选结果执行的命令，组合使用可实现筛选并删除多余的相同哈希值文件功能 (#17)
12. 修正系统右键菜单“执行指定的哈希算法”部分选项失效的问题 (#23)
13. 修复通过哈希表格右键菜单打开单个文件位置且文件不存在时，错误打开并选中文件所在目录的问题
14. 主窗口右上角的【帮助】按钮改为【关于】按钮，由“使用浏览器打开本地帮助页面”改为打开包含相关链接的【关于】窗口


## 版本：v4.5.1，2023/8/6
1. 修复某些情况下因注册表父键不存在而导致安装右键菜单失败的问题
2. 使用无效的校验依据文件时不再提示用户选择处理方式，而是中断校验并提示可能的失败原因
3. 其他 UI 细节调整


## 版本：v4.5.0，2023/7/23
1. 导出哈希结果的保存文件窗口增加[HashCalculator 校验依据|*.hcb]文件类型
2. 修正从命令行启动 HashCalculator 时没有输入正确的子命令仍然会开始计算的问题
3. 增加与 .hcb 文件的关联功能，打开/删除关联的方式附加在”安装/卸载右键菜单“按钮上
4. 修复“从系统右键菜单以指定的算法启动计算，任务完成后点击[新增哈希计算]没有使用默认的哈希算法新增计算，而是以原指定算法进行计算”的问题
5. 重构设置面板，增加设置项：导出哈希计算结果时首选导出文件类型
6. 系统右键菜单增加选项"作为哈希校验依据打开"，对单个文件右击时右键菜单会出现此选项 (#5)
7. 更新 BouncyCastle.Cryptography.dll 版本到 2.2.1


## 版本：v4.4.0，2023/7/13
1. 设置面板增加两个按钮：安装/卸载右键菜单，实现非安装版 HashCalculator 的右键菜单安装、卸载功能
2. 增加设置项，可以选择是否允许运行多个程序实例，从系统右键菜单启动计算时会根据设置决定启动新窗口还是在原窗口进行计算
3. 删除设置面板一些无用的设置（程序未使用的设置）
4. 从系统右键菜单或命令行启动计算，会把承担计算任务的窗口切换到前台
5. 主窗口关闭时自动记住窗口最大最小化状态（请注意：在最小化状态下关闭，下次启动仍是最小化状态）


## 版本：v4.3.0，2023/7/8
1. 安装版的 HashCalculator 集成了自己的两个菜单选项到系统右键菜单，现在可以通过在文件、文件夹、文件夹背景、混选的文件和文件夹上点击右键，选择“计算所选对象哈希值”或“执行指定的哈希算法”来打开 HashCalculator 计算所选对象的哈希值
2. 右键菜单增加“复制文件名”选项
3. 增加程序内右键菜单选项：任务控制，可对多选的任务进行继续、暂停、取消、新增计算、启动未成功项、重新计算操作
4. “文件名”列和“哈希值”列的悬浮提示弹出策略由立即弹出改为系统默认值以减少鼠标在表格上移动时受到的信息干扰
5. “本次待计算队列中的项目总数”和“本次待计算队列已完成的项目数”图标合并为“剩余哈希计算任务数”使其更符合实际状态
6. 解决在正在计算多个文件哈希值过程中更改同时进行计算的任务数可能不能及时生效的问题
7. “文件体积”列的字节数由计算完成后显示改为在开始计算时显示
8. 解决右键菜单“删除文件”、“移除所选项”后不更新校验报告的问题
9. 主界面增加新按钮“停止搜索文件”，实现正在搜索文件同时正在计算过程中点击按钮停止搜索的功能
10. 增加主界面图片按钮的被点击时的效果
11. 优化添加大量文件时的调度逻辑，提高 UI 流畅度
12. 为主窗口图标按钮区域增加滚动条，当横向空间不足时自动显示滚动条
13. 右键菜单选项的可用状态不再绑定表格项数
14. 修复进行“重新计算”等操作时如果文件不存在也不更新“导出”列、“文件体积”列的问题
15. 主窗口左下角添加转圈圈动画，有计算任务时显示，否则不显示
16. 解决使用快速校验时，如果有大量找不到的文件且未完成搜索，点击“停止搜索”按钮无法成功停止的问题
17. 主界面的“继续”、“暂停”、“取消”三个图标按钮不再根据是否有任务运行而切换启用/禁用状态
18. 计算过程中“清空所有内容”按钮不再禁用，计算过程中点击清空按钮会先取消所有任务再清空表格
19. 修复点击取消全部任务时，计算失败/未找到的文件也被错误标记为“已取消”的问题
20. 调整主窗口图标按钮顺序，分组更合理。更新“清空所有内容”按钮图标，使图标更接近“清空”含义而不是之前的“删除”含义


## 版本：v4.1.0，2023/6/18
1. 添加算法选项：SHA3 系列、BLAKE2s(256bit)、BLAKE2b(512bit)、BLAKE3(256bit)、Whirlpool
2. 导出哈希值文本格式更改：每行前增加算法名称，如：`#SHA-1 *hash-string *file-name`
3. 校验依据文件读取逻辑更新：同时支持旧版和新版导出格式的文件
    - 旧版依据文件行格式：hash-string *file-name
    - 新版依据文件行格式：#SHA-1 *hash-string *file-name


## 版本：v4.0.0，2023/6/16
1. 添加 "输出方式" 下拉框; 在 Grid 中添加 "文件体积" 列; 删除设置界面的 "大小写" 设置 [@lujiaxing](https://github.com/lujiaxing)
2. 优化“导出”列的复选框总是需要点击两次才能更改选中状态的问题
3. 更新行内控制按钮的样式等细节
4. 主界面文字按钮改为图片按钮，使界面更简洁紧凑
5. 添加行右键菜单：打开文件、打开位置、复制路径、复制哈希结果、删除文件、移除所选项、文件属性
6. 更新程序图标
7. “哈希值”列、输出方式列、校验结果列改为允许点击表头排序
8. 可能解决了取消任务时偶尔出现完成任务数多于总数导致部分主按钮一直不可用的问题
9. 解决下拉列表框有时候文字模糊的问题
10. 主窗口增加显示：列表项目总数、待计算队列总数、待计算队列已完成数
11. 更改“增加新行重新计算列表文件哈希值”按钮的动作逻辑，使其真正地只重新计算已显示在列表中文件的哈希值，而不是已选择、已拖放的所有文件（包括还未显 示就被取消的文件）
12. 更改文件搜索逻辑，不再搜索完再显示文件，而是边搜索边显示文件，提升在选择/拖入大量文件时的 UI 流畅度
13. 改进逻辑以使更改哈希值输出类型时不再需要重新计算哈希值，校验哈希值时校验结果也不受输出方式的影响
14. 每行的"算法"改为在单独列显示
15. 增加“刷新输出方式”按钮、“计算所有未完成项”按钮
16. 表格改为支持选中多行
17. 更改表格鼠标悬浮时的背景色和选中时的背景色便于区分
18. 删除“使用帮助”窗口，点击“使用帮助”按钮使用默认浏览器打开使用帮助页面
19. 设置面板增加“右键选择删除文件时永久删除而不是移动到回收站”设置项
20. 删除“校验依据类型”下拉列表，"哈希值校验依据"输入框增加 PlaceHolder 类型的提示字符


## 版本：v2.0.1，2022/10/04
1. 更正帮助文档中的错误链接。


## 版本：v2.0.0，2022/10/04

1. 添加选择文件夹按钮：供不方便拖放文件的情况下使用。
2. 新增设置项“使用快速校验时”：可以设置在依据所在目录内搜索一代子文件还是全部子文件。
3. 新增菜单按钮：帮助按钮。点击打开帮助窗口以查看帮助文档。
4. 新增取消任务按钮：选错文件或者不想计算剩余文件的哈希值，可以直接点击取消所有任务。
5. 增加校验报告功能：完成哈希值计算或校验后，把鼠标悬停在任一行的“校验”结果列上就可以看到所有校验结果的汇总。
6. 主界面窗口微调，按钮和菜单不再紧贴标题栏。
7. 修复搜索子目录可能无法搜索到所有文件的问题。
8. 修复使用快速校验时，校验依据里存在但本地不存在的文件没有显示到表格里的问题。
9. 重构程序启动入口，将动态库打包进可执行文件以实现单文件运行。
10. 修复在点击取消任务时有可能使程序卡死的问题。
11. 修复使用快速校验时不同子目录下有相同文件名文件，只能显示其中之一的问题。
12. 修复使用快速校验时依据文件内有相同文件名会得到红色校验结果的问题，现在校验结果显示为黑色，代表`不确定`。
13. 其他未记录的 BUG 修复


## 版本：v1.5.0，2022/09/24
1. 修复问题：当面板中有条目时，使用“选择文件”按钮添加文件，会重复计算已存在的条目。
2. 修复拖放文件到面板但还未计算时哈希类型显示为 SHA256 的问题。
3. 增加记住主窗口关闭时的位置设置项。
4. 增加同时进行的任务数量上限设置项。
5. 新增功能：如果面板为空且校验依据是通用格式的哈希值文件(注1)，可以直接点击校验而无需事先把文件拖入面板计算哈希值。点击校验后程序会在哈希值文件所在目录寻找相应文件计算哈希值并显示校验结果。
6. 设置窗口可调整大小，关闭时自动记住窗口大小。

因设置文件变更，所以之前版本的设置文件可能失效，需要重新设置并保存。

注1：通用格式的哈希值文本文件指的是一个多行文本文件，无需特定后缀，但需要是 UTF-8 编码，每行的格式是：[哈希值][空格][可选星号][文件名]，具体请参考程序的“导出结果”功能导出的哈希值文本格式。


## 版本：v1.3.1，2022/08/24
1. 新增设置项：计算所得哈希值使用小写字母形式
2. 增加设置项：当拖入面板的对象包含文件夹时，可选项：搜索一代子文件、搜索全部子文件、不搜索该文件夹
3. 增加功能：鼠标悬浮在面板行上时显示相应文件的完整路径的悬浮提示


## 版本：v1.2.1，2022/08/18
1. 计算哈希值时，如果无法完成计算，则该行的“导出”列不再默认勾选。


## 版本：v1.2.0，2022/08/14
1. 新增主窗口置顶功能，方便在各种窗口之上对比哈希值
2. 新增 MD5、SHA1、SHA224、SHA384、SHA512哈希算法
3. 新增`主窗口关闭时保存窗口尺寸`设置项
4. 新增面`复制重算`按钮和`原地重算`按钮，分别对应的功能：
    - 以已拖入面板中的文件为文件来源，以`算法`下拉框所选哈希算法，新增相应的行数并计算哈希值
    - 以已拖入面板中的文件为文件来源，以`算法`下拉框所选哈希算法，重新计算哈希值并刷新面板中的结果
5. 检验文件计算所得哈希值时，没有检验过的行的`检验结果`列下的单元格背景色显示为白色，已检验但与依据没有关联则显示为`灰色`，方便区分该行是否已经检验


## 版本：v1.0.3，2022/08/05
1. 首个版本发布，支持SHA256哈希值的批量计算与检验。
